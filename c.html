<!DOCTYPE html>

<html lang="en-us">
<head>
	<meta charset="utf-8">
    <title>MADSAT User Interface</title>
    
    <link rel="stylesheet"  type="text/css" href="styles/jquery-ui-1.10.3.custom.css"/>
    <link rel="stylesheet" type="text/css" href="styles/madsat.css"/>
    <script type="text/javascript" src="books/javascript/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="books/javascript/jquery-ui-1.10.3/js/jquery-ui-1.10.3.custom.js"></script>
    <script type="text/javascript" src="c.js"></script>
    
    <script type="text/javascript">
    // jquery-ui places tabs on page
       $(document).ready(function(){
            $("#tabs").tabs();
		
		//clear panels when a different tab is selected	
		$('#tabs li a').click(function(){
		
			$.post('deleteFiles.jsp');
		  $('#query-results').html('<h1>Query Results</h1>' +
	'<p>Select query from Library tab or Analytics tab to display results.</p>');
		  
		  $('#graphicsDisplay').html('<h1>Geospatial Area of Interest</h1>' +
    '<p>This panel will display, if relevant, a graphic of interest.')
		  
		  }); //end click for clearing panels	
                    
        }); //end tab
    
    
    
    //jquery-ui for autocomplete field in constrained
    	$(document).ready(function(){
    		var list = ["Work in progress" ,"Values will be popluated intelligently", "Based on user input","Functionality to be demonstrated at one year demo"];
    		$("#constrained_text").autocomplete({
    			source : list
    		});
    	});
    	
    
        
    </script>
    
</head>

<body>
<!-- tabbed UI component allows user to select all preferences before execution -->    
<div class="wrapper">
    <div class="main">

<div id="tabs" class="tabs-css">
    <ul>
        <li><a href="#tabs-5">Library</a></li>
    </ul>
    
  
    <!-- Library saved queries tab -->
     <div id="tabs-5">
    	<h1>Canned library</h1>
    	<p class="description">Library of predefined queries. Select database and desired query by typing in 	text boxes.</p>
	<label for="database-list">Select Domain:</label><br>
	<select id="database-list" style="width:150px; height:25px;">
	<option value="null" selected>Select...</option>
	<option value="geoquery">geoquery</option>
	<option value="madsat">madsat</option>
	<option value="madsatBIG">madsatBIG</option>
	<option value="saluteBIG">saluteBIG</option>
	<option value="test">test</option>
	</select>  
	  <br><br>
	<label for="query-list">Select Query:</label><br>
	<input type="text" id="query-list" size="38"><br><br>
	<button id="translate">Translate</button>
	<div id="ul-container">
            <ul id="selectable">
                
                
            </ul>
        </div>
	
	<button id="execute-canned">Execute</button>
    
    
    
<script>
         $(document).ready(function(){
            $.get('inputQueryExamples.txt',function(data){
                var queryString = data;
                var cleanString = "";
                var db = '';
                $('#database-list').change(function(){
                   db = $('#database-list').val();
                   
                   // /(^DATABASE:.*\r\n)(^NL.*)/gm
                   // http://regex101.com/r/mN4hS2
                   //modified 2/12/14
                   regex = new RegExp('(^DATABASE:'+ db +'\r\n)(^NL.*)' ,'gm');
                               
                   cleanString = queryString.match(regex);
                    
                   var nlString = cleanString.map(function(el) {return el.replace('DATABASE:' + db,'');});
                   nlString = nlString.map(function(el){return el.replace('NL:',''); });
                   
                   $('#query-list').autocomplete({
                    source:nlString
                    }); 
                    
                    
        
                 }); // end change
                                         
                
                
            });//end get
          
	  //post selection database and query
	  // last update 4/11/14
	  //$(document).ready(function(){
	       
            //var qString = '';
            $('#translate').click(function(){
            this.disabled = true;
	    	transFunction();
	   		
            
            }); //end translate click
            
            //get correct query translation
	    var sqlQuery ='';
	     
            $('#selectable').selectable({
                                        stop: function(){
                                            sqlQuery = $('#database-list').val()
					    					sqlQuery += ':';
                                            sqlQuery += $('.ui-selected').text()
                                            console.log(sqlQuery);

                                            }
                                        });
            
            $('#execute-canned').click(function(){
				this.disabled =true;    
				execFunction();
				callPlanAgent(); 
				
            }); //end click
	    
       		 }); //end ready
	  
	    
         
     </script>
	
    </div>
 
    
</div> <!-- end of tabs -->

<!-- continuous real time status messaging (ouput) -->
<section id="query-results" style="overflow:auto;">
     
	<h1>Query Results</h1>
	<p>Select query from Library tab or Analytics tab to display results.</p>
	
	
</section>

<section id="graphicsDisplay">
	<h1>Geospatial Area of Interest</h1>
    <p>This panel will display, if relevant, a graphic of interest. Panel may be split into two as development progresses, a top and bottom to allow output of Bayesian Model and other relevant graphic such as an interactive map.</p>
</section>
</div> <!--end of main-->
</div> <!--end of wrapper-->
</body>
</html>

